{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","profileImg","diskStorage","destination","req","filename","file","cb","Date","extname","filetypes","mimetype","test","originalname","toLocaleLowerCase","limits","storage","fileSize","fileFilter","filefilter","single","profileImgs"],"mappings":"AAAA,aAEA,IAAMA,OAASC,QAAQ,UACjBC,KAAOD,QAAQ,QAGfE,WAAaH,OAAOI,YAAY,CAAtCC,YAAgB,SAAAC,EAAGN,EAAOI,GACxBC,EAAAA,KAAW,kBADyBE,SAAA,SAAAD,EAAAE,EAAAC,GAKhCA,EACA,KAAAD,EACKA,aAAA,IAAAE,KAA0BA,MAA1BR,KAAuCA,QAAKS,EAAQH,kBAQrDI,WAAY,SAAAN,EAAAE,EAAAC,GAElB,IAAME,EAAUC,mBAEVC,EAAWD,EAAUE,KAAKN,KAAKK,QAArCL,EAAAO,cAAAC,qBAEA,GAAgBL,EAASG,KAAAN,EAAAK,WAElBF,EACA,OAAAF,EAAA,MAAA,GAXXA,EAAA,2CAekDQ,YAAOjB,OAAA,CAAAkB,QAAAf,WAAAc,OAAA,CAAAE,SAAA,KAAAC,WAAAC,aAAAC,OAAA,kBAACH,OAAAA,QAAS,CAAAI,YAAAA","file":"uploadMiddleware.min.js","sourcesContent":["\"use strict\";\r\n\r\nconst multer = require(\"multer\");\r\nconst path = require(\"path\");\r\n\r\n// const DIR = \"../client/public/images/\";\r\nconst profileImg = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"ProfileImages\");\r\n  },\r\n    filename: (req, file, cb) => {\r\n      // console.log(\"file are\",file)\r\n    cb(\r\n      null,file.originalname + \"-\" + Date.now() + path.extname(file.originalname)\r\n    );\r\n  },\r\n});\r\n\r\n// Check File Type\r\nconst filefilter = (req, file, cb) => {\r\n //Allow ext\r\n    const filetypes = /jpeg|jpg|png|gif/;\r\n    //Check ext\r\n    const extname = filetypes.test(path.extname(file.originalname).toLocaleLowerCase())\r\n    //Check mime type\r\n    const mimetype = filetypes.test(file.mimetype);\r\n\r\n    if (mimetype && extname) {\r\n        return cb(null,true)\r\n    } else {\r\n        cb(\"Error: Image Only and Check File type!\")\r\n    }\r\n};\r\n\r\nconst profileImgs = multer({ storage: profileImg, limits:{fileSize:5000000}, fileFilter: filefilter }).single(\"profilePicture\");\r\nmodule.exports = { profileImgs };\r\n"]}