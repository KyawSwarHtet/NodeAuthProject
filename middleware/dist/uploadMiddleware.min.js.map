{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","profileImg","diskStorage","destination","req","filename","file","cb","log","console","Date","extname","filetypes","mimetype","test","originalname","toLocaleLowerCase","limits","storage","fileSize","fileFilter","filefilter","single","profileImgs"],"mappings":"AAAA,aAEA,IAAMA,OAASC,QAAQ,UACjBC,KAAOD,QAAQ,QAGfE,WAAaH,OAAOI,YAAY,CAAtCC,YAAgB,SAAAC,EAAGN,EAAOI,GACxBC,EAAAA,KAAW,kBADyBE,SAAA,SAAAD,EAAAE,EAAAC,GAIlCF,QAAUG,IAAA,WAAAF,GACRG,EACA,KAAAH,EACKA,aAAA,IAAAI,KAA0BA,MAA1BV,KAAuCA,QAAKW,EAAQL,kBAQrDM,WAAY,SAAAR,EAAAE,EAAAC,GAElB,IAAMI,EAAUC,mBAEVC,EAAWD,EAAUE,KAAKR,KAAKO,QAArCP,EAAAS,cAAAC,qBAEA,GAAgBL,EAASG,KAAAR,EAAAO,WAElBF,EACA,OAAAJ,EAAA,MAAA,GAXXA,EAAA,2CAekDU,YAAOnB,OAAA,CAAAoB,QAAAjB,WAAAgB,OAAA,CAAAE,SAAA,KAAAC,WAAAC,aAAAC,OAAA,kBAACH,OAAAA,QAAS,CAAAI,YAAAA","file":"uploadMiddleware.min.js","sourcesContent":["\"use strict\";\r\n\r\nconst multer = require(\"multer\");\r\nconst path = require(\"path\");\r\n\r\n// const DIR = \"../client/public/images/\";\r\nconst profileImg = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"ProfileImages\");\r\n  },\r\n    filename: (req, file, cb) => {\r\n      console.log(\"file are\",file)\r\n    cb(\r\n      null,file.originalname + \"-\" + Date.now() + path.extname(file.originalname)\r\n    );\r\n  },\r\n});\r\n\r\n// Check File Type\r\nconst filefilter = (req, file, cb) => {\r\n //Allow ext\r\n    const filetypes = /jpeg|jpg|png|gif/;\r\n    //Check ext\r\n    const extname = filetypes.test(path.extname(file.originalname).toLocaleLowerCase())\r\n    //Check mime type\r\n    const mimetype = filetypes.test(file.mimetype);\r\n\r\n    if (mimetype && extname) {\r\n        return cb(null,true)\r\n    } else {\r\n        cb(\"Error: Image Only and Check File type!\")\r\n    }\r\n};\r\n\r\nconst profileImgs = multer({ storage: profileImg, limits:{fileSize:5000000}, fileFilter: filefilter }).single(\"profilePicture\");\r\nmodule.exports = { profileImgs };\r\n"]}