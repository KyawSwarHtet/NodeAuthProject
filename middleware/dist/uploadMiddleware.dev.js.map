{"version":3,"sources":["uploadMiddleware.js"],"names":["multer","require","path","profileImg","diskStorage","destination","req","file","cb","filename","console","log","originalname","Date","now","extname","filefilter","filetypes","test","toLocaleLowerCase","mimetype","profileImgs","storage","limits","fileSize","fileFilter","single","module","exports"],"mappings":"AAAA;;AAEA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB,C,CAEA;;;AACA,IAAME,UAAU,GAAGH,MAAM,CAACI,WAAP,CAAmB;AACpCC,EAAAA,WAAW,EAAE,qBAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC9BA,IAAAA,EAAE,CAAC,IAAD,EAAO,eAAP,CAAF;AACD,GAHmC;AAIlCC,EAAAA,QAAQ,EAAE,kBAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AAC3BE,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBJ,IAAvB;AACFC,IAAAA,EAAE,CACA,IADA,EACKD,IAAI,CAACK,YAAL,GAAoB,GAApB,GAA0BC,IAAI,CAACC,GAAL,EAA1B,GAAuCZ,IAAI,CAACa,OAAL,CAAaR,IAAI,CAACK,YAAlB,CAD5C,CAAF;AAGD;AATmC,CAAnB,CAAnB,C,CAYA;;AACA,IAAMI,UAAU,GAAG,SAAbA,UAAa,CAACV,GAAD,EAAMC,IAAN,EAAYC,EAAZ,EAAmB;AACrC;AACG,MAAMS,SAAS,GAAG,kBAAlB,CAFkC,CAGlC;;AACA,MAAMF,OAAO,GAAGE,SAAS,CAACC,IAAV,CAAehB,IAAI,CAACa,OAAL,CAAaR,IAAI,CAACK,YAAlB,EAAgCO,iBAAhC,EAAf,CAAhB,CAJkC,CAKlC;;AACA,MAAMC,QAAQ,GAAGH,SAAS,CAACC,IAAV,CAAeX,IAAI,CAACa,QAApB,CAAjB;;AAEA,MAAIA,QAAQ,IAAIL,OAAhB,EAAyB;AACrB,WAAOP,EAAE,CAAC,IAAD,EAAM,IAAN,CAAT;AACH,GAFD,MAEO;AACHA,IAAAA,EAAE,CAAC,wCAAD,CAAF;AACH;AACJ,CAbD;;AAeA,IAAMa,WAAW,GAAGrB,MAAM,CAAC;AAAEsB,EAAAA,OAAO,EAAEnB,UAAX;AAAuBoB,EAAAA,MAAM,EAAC;AAACC,IAAAA,QAAQ,EAAC;AAAV,GAA9B;AAAkDC,EAAAA,UAAU,EAAET;AAA9D,CAAD,CAAN,CAAmFU,MAAnF,CAA0F,gBAA1F,CAApB;AACAC,MAAM,CAACC,OAAP,GAAiB;AAAEP,EAAAA,WAAW,EAAXA;AAAF,CAAjB","sourcesContent":["\"use strict\";\r\n\r\nconst multer = require(\"multer\");\r\nconst path = require(\"path\");\r\n\r\n// const DIR = \"../client/public/images/\";\r\nconst profileImg = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"ProfileImages\");\r\n  },\r\n    filename: (req, file, cb) => {\r\n      console.log(\"file are\",file)\r\n    cb(\r\n      null,file.originalname + \"-\" + Date.now() + path.extname(file.originalname)\r\n    );\r\n  },\r\n});\r\n\r\n// Check File Type\r\nconst filefilter = (req, file, cb) => {\r\n //Allow ext\r\n    const filetypes = /jpeg|jpg|png|gif/;\r\n    //Check ext\r\n    const extname = filetypes.test(path.extname(file.originalname).toLocaleLowerCase())\r\n    //Check mime type\r\n    const mimetype = filetypes.test(file.mimetype);\r\n\r\n    if (mimetype && extname) {\r\n        return cb(null,true)\r\n    } else {\r\n        cb(\"Error: Image Only and Check File type!\")\r\n    }\r\n};\r\n\r\nconst profileImgs = multer({ storage: profileImg, limits:{fileSize:5000000}, fileFilter: filefilter }).single(\"profilePicture\");\r\nmodule.exports = { profileImgs };\r\n"],"file":"uploadMiddleware.dev.js"}